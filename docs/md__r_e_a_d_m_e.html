<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>assignment1_rt2: Assignment 2 (Part I) - Action Client and Service Node for Robot Navigation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">assignment1_rt2
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Documentation of the python code for the ros package</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Assignment 2 (Part I) - Action Client and Service Node for Robot Navigation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
Overview</h1>
<p>This project involves creating a ROS package named <code>assignment1_rt2</code> that implements two key components to move the robot by setting a goal to reach. These components are:</p>
<ol type="1">
<li><b>Action Client Node (node1)</b>: an action client that allows the user to set a goal or cancel it, and publishes, on the <code>/robot_information</code> topic, the custom message <code>Robot_info</code> composed of the following fields:<ul>
<li><code>float64 x</code></li>
<li><code>float64 y</code></li>
<li><code>float64 vel_x</code></li>
<li><code>float64 vel_z</code></li>
</ul>
</li>
<li><b>Service Node (node2)</b>: a service that returns the coordinates of the last goal set by the user through the first node.</li>
</ol>
<h1><a class="anchor" id="autotoc_md2"></a>
Nodes Description</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
1. Action Client Node</h2>
<p>Everything is managed in the same terminal tab where the launch file was started. The action client will prompt you to press one of three keys:</p><ul>
<li><code>s</code> to set a new goal</li>
<li><code>c</code> to cancel an active goal</li>
<li><code>q</code> to exit the program</li>
</ul>
<p>If <code>s</code> is pressed, you will also need to enter the <code>x</code> and <code>y</code> coordinates of the robot's destination.</p>
<p>After setting the goal, once the robot reaches it, a warning will be printed containing the robot's current position and the goal status, which will be: <code>Goal reached!</code>. Additionally, this node publishes the robot's position and velocity as a custom message containing <code>x, y, vel_x, vel_z</code>, using the <code>/odom</code> topic data.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
2. Service Node</h2>
<p>This node is a service that allows retrieving the last goal set to the action server. The functionality is simple, no specific request is needed, and the service response will simply be the last goal set of type <code>geometry_msgs/PoseStamped</code>.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
3. Launch File</h2>
<p>The <code>simulation.launch</code> file initializes the action client, service nodes, and all simulation nodes included in the <code>assignment_2_2024</code> package. The launch file opens a new <code>gnome-terminal</code> to execute the action client, allowing the user to interact more effectively with the node.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Install the Package</h1>
<h2><a class="anchor" id="autotoc_md7"></a>
Prerequisites</h2>
<ul>
<li><b>ROS</b> must be installed on your system</li>
<li>A properly configured ROS workspace</li>
<li><code>Gazebo</code> and <code>RViz</code> installed</li>
<li>Clone the package <code>assignment_2_2024</code> at the following link: <a href="https://github.com/CarmineD8/assignment_2_2024">assignment_2_2024</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
1. Clone the Package</h2>
<ul>
<li>Open a terminal.</li>
<li>Navigate to the <code>src</code> folder of your ROS workspace: <div class="fragment"><div class="line">cd ~/catkin_ws/src</div>
</div><!-- fragment --></li>
<li>Clone the <code>assignment1_rt2</code> package repository: <div class="fragment"><div class="line">git clone https://github.com/AlessandroMangili/assignment1_rt2</div>
</div><!-- fragment --></li>
<li>Enter the repo and switch to the <code>ros1</code> branch: ```bash cd assignment1_rt2 git switch ros1 ```</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
2. Compile the Package</h2>
<ul>
<li>Navigate back to the main workspace directory: <div class="fragment"><div class="line">cd ~/catkin_ws</div>
</div><!-- fragment --></li>
<li>Compile the package using <code>catkin_make</code>: <div class="fragment"><div class="line">catkin_make</div>
</div><!-- fragment --></li>
<li>Check that the package compiled successfully. If there are no errors, a build completion message will appear.</li>
</ul>
<h2><a class="anchor" id="autotoc_md10"></a>
3. Source the Environment</h2>
<ul>
<li><p class="startli">Update the ROS environment variables to make your package accessible by adding the following line inside your <code>~/.bashrc</code> file: </p><div class="fragment"><div class="line">echo &quot;source ~/catkin_ws/devel/setup.bash&quot; &gt;&gt; ~/.bashrc</div>
</div><!-- fragment --><p class="startli">To apply the changes, type the command: </p><div class="fragment"><div class="line">source ~/.bashrc</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="autotoc_md11"></a>
4. Run the Package</h2>
<h3><a class="anchor" id="autotoc_md12"></a>
4.1. Start the Simulation from launch file</h3>
<ul>
<li><p class="startli">Open the terminal and run the whole simulation </p><div class="fragment"><div class="line">roslaunch assignment1_rt2 simulation.launch</div>
</div><!-- fragment --><p class="startli">A second terminal will be opened, allowing the user to interact to set or cancel the goal. </p>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md13"></a>
4.2 (Optional) Call to the service node</h3>
<ul>
<li><p class="startli">If you want to make a call to the service node to get the last goal that was sent to the action server, you need to open a new terminal tab and type the command: </p><div class="fragment"><div class="line">rosservice call /get_last_goal</div>
</div><!-- fragment --><p class="startli">and you will receive a message of type <code>geometry_msgs/PoseStamped</code> containing the last set goal.</p>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md14"></a>
5. Interacting with the Nodes</h2>
<ul>
<li><p class="startli"><b>Action Client Node</b>: everything is managed in the same terminal tab where the launch file was started. The action client will prompt you to press one of three keys:</p><ul>
<li><code>s</code> to set a new goal</li>
<li><code>c</code> to cancel an active goal</li>
<li><code>q</code> to exit the program</li>
</ul>
<p class="startli"><b>Don't worry about the messages being printed, the action client will always be listening!</b>.</p>
</li>
<li><b>Service Node</b>: To interact with it, just open a new terminal and use the command <code>rosservice call /get_last_goal</code>. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
